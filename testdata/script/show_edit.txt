# Show and edit flows
exec ugh --db $WORK/db.sqlite add (B) 2026-01-02 Plan trip +travel @home due:2026-01-02 note:foo ++bad

exec ugh --db $WORK/db.sqlite show 1
cmp stdout want-show.txt

exec ugh --db $WORK/db.sqlite show 1 --json
stdout '\{"id":1,"done":false,"priority":"B","creationDate":"2026-01-02","description":"Plan trip","projects":\["travel"\],"contexts":\["home"\],"meta":\{"due":"2026-01-02","note":"foo"\},"unknown":\["\+\+bad"\],"todoTxt":"\(B\) 2026-01-02 Plan trip \+travel @home due:2026-01-02 note:foo \+\+bad","createdAt":"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z","updatedAt":"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z"\}'

exec ugh --db $WORK/db.sqlite edit 1 --text '(A) Updated task +work @office key:val'

exec ugh --db $WORK/db.sqlite show 1
cmp stdout want-show-updated.txt

exec ugh --db $WORK/db.sqlite show 1 --json
stdout '\{"id":1,"done":false,"priority":"A","creationDate":"2026-01-02","description":"Updated task","projects":\["work"\],"contexts":\["office"\],"meta":\{"key":"val"\},"unknown":\[\],"todoTxt":"\(A\) 2026-01-02 Updated task \+work @office key:val","createdAt":"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z","updatedAt":"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z"\}'

-- want-show.txt --
(B) 2026-01-02 Plan trip +travel @home due:2026-01-02 note:foo ++bad
-- want-show-updated.txt --
(A) 2026-01-02 Updated task +work @office key:val
