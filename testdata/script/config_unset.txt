# Config unset flows
exec ugh --config $WORK/config.toml config set db.path data/ugh.sqlite
exec ugh --config $WORK/config.toml config set db.sync_url libsql://example.turso.io
exec ugh --config $WORK/config.toml config set db.auth_token test-token
exec ugh --config $WORK/config.toml config set db.sync_on_write true
exec ugh --config $WORK/config.toml config set ui.theme ansi-high-contrast

! exec ugh --config $WORK/config.toml config unset unknown.key
stderr 'unknown config key: unknown.key'

exec ugh --config $WORK/config.toml config unset db.path
! exec ugh --config $WORK/config.toml config get db.path
stderr 'config key not set: db.path'

exec ugh --config $WORK/config.toml config unset db.sync_url
! exec ugh --config $WORK/config.toml config get db.sync_url
stderr 'config key not set: db.sync_url'

exec ugh --config $WORK/config.toml config unset db.auth_token
! exec ugh --config $WORK/config.toml config get db.auth_token
stderr 'config key not set: db.auth_token'

exec ugh --json --config $WORK/config.toml config set db.sync_on_write true
stdout '"action":"set"'
stdout '"key":"db.sync_on_write"'

exec ugh --json --config $WORK/config.toml config unset db.sync_on_write
stdout '"action":"unset"'
stdout '"key":"db.sync_on_write"'

exec ugh --config $WORK/config.toml config get db.sync_on_write
cmp stdout want-sync-on-write.txt

exec ugh --config $WORK/config.toml config unset ui.theme
exec ugh --config $WORK/config.toml config get ui.theme
cmp stdout want-theme.txt

-- want-sync-on-write.txt --
false
-- want-theme.txt --
ansi-default
