# Import/export flows
# Blank lines in import files are skipped.
exec ugh --db $WORK/db.sqlite import import.jsonl
cmp stdout want-import.txt

stdin stdin.jsonl
exec ugh --db $WORK/db.sqlite import -
cmp stdout want-import-stdin.txt

exec ugh --db $WORK/db.sqlite export export.jsonl
cmp stdout want-export.txt
grep 'Alpha' export.jsonl
grep 'Bravo' export.jsonl
grep 'Charlie' export.jsonl
grep 'Delta' export.jsonl

exec ugh --db $WORK/db.sqlite export -
stdout '"title":"Alpha"'
stdout '"title":"Bravo"'
stdout '"title":"Charlie"'
stdout '"title":"Delta"'

-- import.jsonl --
{"title":"Alpha","state":"now","projects":["work"]}

{"title":"Bravo","projects":["home"],"contexts":["phone"]}
{"title":"Charlie","dueOn":"2026-02-01"}

-- stdin.jsonl --
{"title":"Delta","projects":["misc"]}

-- want-import.txt --
import: added 3, skipped 2 (import.jsonl)
-- want-import-stdin.txt --
import: added 1, skipped 1 (-)
-- want-export.txt --
export: 4 (export.jsonl)
