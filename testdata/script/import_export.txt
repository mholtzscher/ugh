# Import/export flows
# Blank lines in import files are skipped.
exec ugh --db $WORK/db.sqlite import import.txt
cmp stdout want-import.txt

stdin stdin.txt
exec ugh --db $WORK/db.sqlite import -
cmp stdout want-import-stdin.txt

exec ugh --db $WORK/db.sqlite export export.txt
cmp stdout want-export.txt
grep 'Alpha' export.txt
grep 'Bravo' export.txt
grep 'Charlie' export.txt
grep 'Delta' export.txt

exec ugh --db $WORK/db.sqlite export -
stdout 'Alpha'
stdout 'Bravo'
stdout 'Charlie'
stdout 'Delta'

! exec ugh --db $WORK/db.sqlite --json export -
stderr 'cannot be used when exporting to stdout'

-- import.txt --
(A) Alpha +work

Bravo @home
Charlie due:2026-02-01

-- stdin.txt --
Delta +misc

-- want-import.txt --
import: added 3, skipped 2 (import.txt)
-- want-import-stdin.txt --
import: added 1, skipped 1 (-)
-- want-export.txt --
export: 4 (export.txt)
